webpackJsonp([0],{0:function(t,e,i){"use strict";function n(){var t=new o.Game2048(4,new s.DefaultRandom),e=new a.PixiRender(document,t);t.BindRender(e),Mousetrap.bind("up",function(){t.Action(r.Direction.Up)}),Mousetrap.bind("down",function(){t.Action(r.Direction.Down)}),Mousetrap.bind("left",function(){t.Action(r.Direction.Left)}),Mousetrap.bind("right",function(){t.Action(r.Direction.Right)}),setTimeout(function(){document.getElementById("control-up").addEventListener("click",function(){t.Action(r.Direction.Up)}),document.getElementById("control-down").addEventListener("click",function(){t.Action(r.Direction.Down)}),document.getElementById("control-left").addEventListener("click",function(){t.Action(r.Direction.Left)}),document.getElementById("control-right").addEventListener("click",function(){t.Action(r.Direction.Right)}),document.getElementById("btn-save").addEventListener("click",function(){var e=t.Serialize(),i=new File([e],"game2048.txt",{type:"plain/text"});l.saveAs(i)}),document.getElementById("input-load").addEventListener("change",function(i){for(var n,o=i.target.files,r=0;n=o[r];r++){var s=new FileReader;s.onload=function(i){return function(i){var n=i.target.result;t.InitFromState(n),e.RebuildGraphics(),document.body.focus()}}(n),s.readAsText(n)}},!1)},0)}var o=i(1),r=i(2),s=i(9),a=i(10);i(157);var l=i(165);n()},1:function(t,e,i){"use strict";var n=i(2),o=i(3),r=i(5),s=i(7),a=i(8),l=i(4),u=i(6),c=function(){function t(t,e){this.Scores=0,this.OnTilesUpdated=new s.Observable,this.OnGameFinished=new s.Observable,this.userActionsQueue=[],this.rand=e,this.Grid=new o.Grid(t),this.insertNewTileToVacantSpace()}return t.prototype.BindRender=function(t){this.OnTilesUpdated.RegisterObserver(t.OnTilesUpdated.bind(t)),this.OnGameFinished.RegisterObserver(t.OnGameFinished.bind(t)),t.OnTurnAnimationsCompleted.RegisterObserver(this.fetchAndExecuteUserActionFromQueue.bind(this))},t.prototype.Serialize=function(){var t={Scores:this.Scores,GridSerialized:this.Grid.Serialize()};return JSON.stringify(t)},t.prototype.InitFromState=function(t){var e=JSON.parse(t);this.Scores=e.Scores,this.Grid=o.Grid.Deserialize(e.GridSerialized)},t.prototype.Action=function(t){var e=this.processAction.bind(this,t);this.userActionsQueue.push(e),1==this.userActionsQueue.length&&e()},t.prototype.fetchAndExecuteUserActionFromQueue=function(){if(this.userActionsQueue.splice(0,1),this.userActionsQueue.length>0){var t=this.userActionsQueue[0];t()}},t.prototype.calculateGameEvents=function(t){for(var e=[],i=this.Grid.GetRowDataByDirection(t),n=0;n<i.length;++n)for(var o=r.RowProcessor.ProcessRow(i[n]),s=0;s<o.length;++s){var a=o[s],l=i[n][a.OldIndex],c=i[n][a.NewIndex];a.IsMerged()?e.push(new u.TileMergeEvent(l,c,a.MergedValue)):e.push(new u.TileMoveEvent(l,c,a.Value,a.IsDeleted()))}return e},t.prototype.processAction=function(t){a.CommonTools.ConsoleLog("start process action",[this.Grid.Serialize(),n.Direction[t]]);for(var e=this.calculateGameEvents(t),i=0;i<e.length;++i){var o=e[i];if(o instanceof u.TileMoveEvent){var r=o;this.Grid.UpdateTileByPos(r.NewPosition,r.Value),this.Grid.RemoveTileByPos(r.Position)}if(o instanceof u.TileMergeEvent){var s=o;this.Grid.UpdateTileByPos(s.TilePosToMergeWith,s.NewValue),this.Grid.RemoveTileByPos(s.Position),this.Scores+=s.NewValue}this.OnTilesUpdated.NotifyObservers(o)}if(e.length>0){var l=this.insertNewTileToVacantSpace();this.OnTilesUpdated.NotifyObservers(new u.TileCreatedEvent(l,l.Value))}else{this.OnTilesUpdated.NotifyObservers(null);var c=this.Grid.AvailableCells();if(0==c.length){var h=this.calculateGameEvents(n.Direction.Up).length>0||this.calculateGameEvents(n.Direction.Right).length>0||this.calculateGameEvents(n.Direction.Left).length>0||this.calculateGameEvents(n.Direction.Down).length>0;h||this.OnGameFinished.NotifyObservers(null)}}a.CommonTools.ConsoleLog("  end process action",[this.Grid.Serialize()])},t.prototype.insertNewTileToVacantSpace=function(){var t=this.Grid.AvailableCells();if(t.length>0){var e=this.rand.GetRandomNumber(t.length),i=t[e],n=new l.Tile(i.RowIndex,i.CellIndex,2);return this.Grid.InsertTileByPos(n,n.Value),n}return null},t}();e.Game2048=c},2:function(t,e){"use strict";!function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Right=2]="Right",t[t.Left=3]="Left"}(e.Direction||(e.Direction={}));e.Direction},3:function(t,e,i){"use strict";var n=i(2),o=i(4),r=function(){function t(t){this.Size=t,this.Cells=new Array(this.Size);for(var e=0;e<this.Size;e++){this.Cells[e]=new Array(this.Size);for(var i=0;i<this.Size;i++)this.Cells[e][i]=0}}return t.prototype.Serialize=function(){for(var t=[],e=0;e<this.Size;++e)t.push(this.Cells[e].join(","));return t.join("|")},t.Deserialize=function(e){var i=new t(1);return i.InitFromState(e),i},t.prototype.InitFromState=function(t){var e=t.split("|");this.Size=e.length,this.Cells=[];for(var i=0;i<this.Size;++i){var n=[];this.Cells.push(n);var o=e[i].split(",");if(o.length!=this.Size)throw"Incorrect serialized grid state";for(var r=0;r<this.Size;++r)n.push(parseInt(o[r],10))}},t.prototype.InsertTileByPos=function(t,e){this.InsertTile(t.RowIndex,t.CellIndex,e)},t.prototype.InsertTile=function(t,e,i){if(t<0)throw"X position "+t+"is < 0";if(e<0)throw"Y position "+e+"is < 0";if(t>=this.Size)throw"X position "+t+"is more than grid size";if(e>=this.Size)throw"Y position "+e+"is more than grid size";if(0!=this.Cells[t][e])throw"Cell with position "+t+", "+e+" is occupied";this.Cells[t][e]=i},t.prototype.RemoveTile=function(t,e){this.Cells[t][e]=0},t.prototype.RemoveTileByPos=function(t){this.RemoveTile(t.RowIndex,t.CellIndex)},t.prototype.GetTile=function(t,e){return new o.Tile(t,e,this.Cells[t][e])},t.prototype.UpdateTileByPos=function(t,e){this.Cells[t.RowIndex][t.CellIndex]=e},t.prototype.AvailableCells=function(){for(var t=[],e=0;e<this.Size;++e)for(var i=0;i<this.Size;++i)0==this.Cells[e][i]&&t.push(new o.TilePosition(e,i));return t},t.prototype.GetRowDataByDirection=function(t){var e=[];switch(t){case n.Direction.Left:for(var i=0;i<this.Size;++i){for(var o=[],r=0;r<this.Size;++r)o.push(this.GetTile(i,r));e.push(o)}break;case n.Direction.Right:for(var i=0;i<this.Size;++i){for(var o=[],r=0;r<this.Size;++r)o.push(this.GetTile(i,this.Size-r-1));e.push(o)}break;case n.Direction.Up:for(var r=0;r<this.Size;++r){for(var o=[],i=0;i<this.Size;++i)o.push(this.GetTile(i,r));e.push(o)}break;case n.Direction.Down:for(var r=0;r<this.Size;++r){for(var o=[],i=0;i<this.Size;++i)o.push(this.GetTile(this.Size-i-1,r));e.push(o)}}return e},t}();e.Grid=r},4:function(t,e){"use strict";var i=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(){function t(t,e){this.RowIndex=t,this.CellIndex=e}return t.prototype.toString=function(){return"["+this.RowIndex+","+this.CellIndex+"]"},t}();e.TilePosition=n;var o=function(t){function e(e,i,n){t.call(this,e,i),this.Value=n}return i(e,t),e}(n);e.Tile=o},5:function(t,e,i){"use strict";var n=i(6),o=function(){function t(){}return t.ProcessRow=function(t){for(var e=t[0].Value,i=t[0].Value>0?1:0,o=[],r=null,s=1;s<t.length;++s){var a=t[s].Value;0!=a&&(e==a?(null!=r?r.MergedValue=-1:o.push(new n.RowProcessionEvent(i-1,i-1,a,(-1))),o.push(new n.RowProcessionEvent(s,i-1,a,a+e)),e=0):(s>i&&(r=new n.RowProcessionEvent(s,i,a),o.push(r)),e=a,++i))}return o},t}();e.RowProcessor=o},6:function(t,e){"use strict";var i=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(){function t(t,e,i,n){void 0===n&&(n=0),this.OldIndex=t,this.NewIndex=e,this.MergedValue=n,this.Value=i}return t.prototype.IsDeleted=function(){return this.MergedValue<0},t.prototype.IsMerged=function(){return this.MergedValue>0},t}();e.RowProcessionEvent=n;var o=function(){function t(t){this.Position=t}return t}();e.TileUpdateEvent=o;var r=function(t){function e(e,i,n){t.call(this,e),this.TilePosToMergeWith=i,this.NewValue=n}return i(e,t),e}(o);e.TileMergeEvent=r;var s=function(t){function e(e,i,n,o){t.call(this,e),this.NewPosition=i,this.Value=n,this.ShouldBeDeleted=o}return i(e,t),e}(o);e.TileMoveEvent=s;var a=function(t){function e(e,i){t.call(this,e),this.TileValue=i}return i(e,t),e}(o);e.TileCreatedEvent=a},7:function(t,e){"use strict";var i=function(){function t(){this.observers=[]}return t.prototype.RegisterObserver=function(t){this.observers.push(t)},t.prototype.RemoveObserver=function(t){this.observers.splice(this.observers.indexOf(t),1)},t.prototype.NotifyObservers=function(t){this.observers.forEach(function(e){e(t)})},t}();e.Observable=i},8:function(t,e){"use strict";var i=function(){function t(){}return t.ConsoleLog=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=null);var o="";i&&(o+="font-weight:bold; "),null!=n&&(o+="color:"+n+"; "),""!=o?console.log("%c"+t,o,e):console.log(t,e)},t}();e.CommonTools=i},9:function(t,e){"use strict";var i=function(){function t(){}return t.GetRandomIntInclusive=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.GetRandomInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.GetRandColor=function(){var t=this.GetRandomInt(120,255),e=this.GetRandomInt(120,255),i=this.GetRandomInt(120,255);return i+256*e+65536*t},t}();e.RandomHelper=i;var n=function(){function t(){}return t.prototype.GetRandomNumber=function(t){return i.GetRandomInt(0,t)},t}();e.DefaultRandom=n},10:function(t,e,i){"use strict";var n=i(11),o=i(7),r=i(148),s=i(149),a=i(150),l=i(151),u=i(152),c=i(154),h=i(155),d=i(156),p=i(6),f=function(){function t(t,e){var i=this;this.OnTurnAnimationsCompleted=new o.Observable,this.tiles=new r.Dictionary([]),this.staticRoot=null,this.game=e;var s=n.autoDetectRenderer(400,400,{backgroundColor:15724527});t.body.appendChild(s.view),this.stage=new n.Container,this.RebuildGraphics(),this.animationsManager=new a.AnimationsManager(this.onAnimationsCompleted.bind(this));var l=new n.ticker.Ticker;l.add(function(){i.animationsManager.Update(l.elapsedMS),s.render(i.stage),i.scoresText.text=e.Scores.toString(),i.fpsText.text=l.FPS.toFixed(2)}),l.start()}return t.prototype.RebuildGraphics=function(){this.gameOverRendered=!1,this.rebuildStaticObjects(),this.rebuildDynamicObjects()},t.prototype.OnGameFinished=function(){if(!this.gameOverRendered){var t=s.RenderHelper.GreateGameOverGraphics();this.staticRoot.addChild(t)}this.gameOverRendered=!0},t.prototype.OnTilesUpdated=function(t){var e=this;if(null===t&&this.animationsManager.AddAnimation(new l.AnimationQueue([new c.AnimationScale(this.scoresText,50,1.3),new c.AnimationScale(this.scoresText,100,1)])),t instanceof p.TileMoveEvent){var i=t,o=this.tiles.Get(this.getTileKey(i.Position));this.unregisterTile(o),this.bringToFront(o);var r={};s.RenderHelper.CalculateTileCoordinates(r,i.NewPosition.RowIndex,i.NewPosition.CellIndex),this.animationsManager.AddAnimation(new u.AnimationMove(o,150,r,function(){if(e.removeTileGraphics(o),i.ShouldBeDeleted)e.removeTileGraphics(o);else{var t=e.addTileGraphics(i.NewPosition.RowIndex,i.NewPosition.CellIndex,i.Value);e.registerTile(t)}}))}else if(t instanceof p.TileMergeEvent){var a=t,o=this.tiles.Get(this.getTileKey(a.Position));this.unregisterTile(o),this.bringToFront(o);var r={};s.RenderHelper.CalculateTileCoordinates(r,a.TilePosToMergeWith.RowIndex,a.TilePosToMergeWith.CellIndex),this.animationsManager.AddAnimation(new u.AnimationMove(o,150,r,function(){e.removeTileGraphics(o);var t=e.addTileGraphics(a.TilePosToMergeWith.RowIndex,a.TilePosToMergeWith.CellIndex,a.NewValue);e.registerTile(t),e.animationsManager.AddAnimation(new l.AnimationQueue([new c.AnimationScale(t,50,1.3),new c.AnimationScale(t,100,1)]))}))}else if(t instanceof p.TileCreatedEvent){var f=t,A=this.addTileGraphics(f.Position.RowIndex,f.Position.CellIndex,f.TileValue);this.registerTile(A),A.alpha=0,A.scale=new n.Point(.1,.1),this.animationsManager.AddAnimation(new l.AnimationQueue([new d.AnimationDelay(200),new h.AnimationFade(A,1,1),new c.AnimationScale(A,150,1)]))}},t.prototype.onAnimationsCompleted=function(){console.log("Animations completed!!"),this.OnTurnAnimationsCompleted.NotifyObservers(null)},t.prototype.rebuildStaticObjects=function(){null!=this.staticRoot&&this.stage.removeChild(this.staticRoot),this.staticRoot=new n.Container,this.stage.addChild(this.staticRoot);var t=s.RenderHelper.CreateOtherStatic(this.game);this.staticRoot.addChild(t),this.scoresText=s.RenderHelper.CreateScoresText(),this.staticRoot.addChild(this.scoresText);var e={font:"Inconsolata, Courier New",fill:"#005521",lineHeight:14};this.fpsText=new n.Text("",e),this.fpsText.x=300,this.fpsText.y=8,this.staticRoot.addChild(this.fpsText)},t.prototype.rebuildDynamicObjects=function(){var t=this;this.scoresText.text=this.game.Scores.toString(),this.tiles.Values().forEach(function(e){t.stage.removeChild(e)}),this.stage.children.forEach(function(t){t instanceof s.TileSprite&&console.log("Found not deleted "+t.TileKey)}),this.tiles=new r.Dictionary([]);for(var e=0;e<this.game.Grid.Size;++e)for(var i=0;i<this.game.Grid.Size;++i){var n=this.game.Grid.Cells[e][i];if(0!=n){var o=this.addTileGraphics(e,i,n);this.registerTile(o)}}},t.prototype.registerTile=function(t){this.tiles.Add(t.TileKey,t)},t.prototype.unregisterTile=function(t){var e=t.TileKey;this.tiles.Remove(e),console.log("unregistered "+e)},t.prototype.removeTileGraphics=function(t){return t.parent?void t.parent.removeChild(t):void console.log("tile parent is null")},t.prototype.addTileGraphics=function(t,e,i){var n=this.getTileKey({RowIndex:t,CellIndex:e}),o=s.RenderHelper.CreateTileSprite(t,e,i,n);return s.RenderHelper.CalculateTileCoordinates(o,t,e),this.stage.addChild(o),o},t.prototype.bringToFront=function(t){if(t){var e=t.parent;e&&(e.removeChild(t),e.addChild(t))}},t.prototype.getTileKey=function(t){return t.RowIndex.toString()+"_"+t.CellIndex.toString()},t}();e.PixiRender=f},148:function(t,e){"use strict";var i=function(){function t(t){this._keys=[],this._values=[];for(var e=0;e<t.length;e++)this.Add(t[e].Key,t[e].Value)}return t.prototype.Add=function(t,e){if(void 0!==this[t.toString()])throw"Item with key "+t+" has been already added to dictionary";this[t.toString()]=e,this._keys.push(t),this._values.push(e)},t.prototype.Remove=function(t){var e=this._keys.indexOf(t,0);this._keys.splice(e,1),this._values.splice(e,1),delete this[t.toString()]},t.prototype.Keys=function(){return this._keys},t.prototype.Values=function(){return this._values},t.prototype.ContainsKey=function(t){return"undefined"!=typeof this[t.toString()]},t.prototype.Get=function(t){var e=this[t.toString()];if(void 0!==e)return e;throw"Key "+t+" is not found in dictionary"},t}();e.Dictionary=i},149:function(t,e){"use strict";var i=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(PIXI.Container);e.TileSprite=n;var o=function(){function t(){}return t.CreateTileSprite=function(t,e,i,o){var r=new n;r.TileKey=o,r.width=this.TileSize,r.height=this.TileSize;var s=new PIXI.Graphics;s.lineStyle(1,14737632,1),s.beginFill(this.getTileBgColor(i),1),s.drawRect(0,0,this.TileSize,this.TileSize),s.endFill(),s.x=-this.TileSizeHalf,s.y=-this.TileSizeHalf,r.addChild(s);var a={font:this.getTileFontSize(i)+" Inconsolata, Courier New",fill:"#"+this.getTileTextColor(i).toString(16)},l=new PIXI.Text(i.toString(),a);return l.x=this.getTileTextXOffset(i)-this.TileSizeHalf,l.y=this.getTileTextYOffset(i)-this.TileSizeHalf,r.addChild(l),r},t.CreateScoresText=function(){var t={font:"32px Inconsolata, Courier New",fill:"#776E65"},e=new PIXI.Text("0",t);return e.x=this.TileSize,e.y=16,e},t.GreateGameOverGraphics=function(){var t={font:"32px Inconsolata, Courier New",fill:"#776E65"},e=new PIXI.Text("GAME OVER",t);return e.x=this.TileSize,e.y=46,e},t.CreateOtherStatic=function(t){var e=t.Grid.Size,i=new PIXI.Graphics,n=8;return i.lineStyle(1,14737632,1),i.drawRect(2*this.TileSize-n,2*this.TileSize-n,this.TileSize*e+n+n,this.TileSize*e+n+n),i},t.CalculateTileCoordinates=function(t,e,i){t.x=2*this.TileSize+i*this.TileSize+this.TileSizeHalf,t.y=2*this.TileSize+e*this.TileSize+this.TileSizeHalf},t.getTileFontSize=function(t){return t<100?"32px":t<1e3?"28px":t<1e4?"22px":"18px"},t.getTileTextXOffset=function(t){return t<10?17:t<100?8:t<1e3?3:2},t.getTileTextYOffset=function(t){return t<100?13:t<1e3?16:17},t.getTileTextColor=function(t){return t>4?16381682:7827045},t.getTileBgColor=function(t){switch(t){case 2:return 15656154;case 4:return 15589576;case 8:return 15905145;case 16:return 16094563;case 32:return 16153695;case 64:return 16145979;case 128:return 15585138;case 256:return 15584353;case 512:return 15583312;case 1024:return 15582527;case 2048:return 15581742;case 4096:return 15581742;case 8192:return 15581742;default:return 15581742}},t.TileSize=50,t.TileSizeHalf=25,t}();e.RenderHelper=o},150:function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(151),r=function(t){function e(e){void 0===e&&(e=null),t.call(this,[],e)}return n(e,t),e.prototype.AddAnimation=function(t){this.Animations.push(t)},e.prototype.Update=function(e){var i=this.Animations.length>0;t.prototype.Update.call(this,e),i&&0==this.Animations.length&&null!=this.OnCompleted&&this.OnCompleted()},e}(o.AnimationParallel);e.AnimationsManager=r},151:function(t,e){"use strict";var i=function(){function t(t,e){void 0===e&&(e=null),this.Animations=[],this.Animations=t,this.OnCompleted=e,this.IsCompleted=!1}return t.prototype.Update=function(t){if(0!=this.Animations.length){var e=[],i=this.Animations.filter(function(i){return i.Update(t),i.IsCompleted&&null!=i.OnCompleted&&e.push(i.OnCompleted),!i.IsCompleted});this.Animations=i,e.forEach(function(t){return t()}),0==this.Animations.length&&(this.IsCompleted=!0)}},t}();e.AnimationParallel=i;var n=function(){function t(t,e){void 0===e&&(e=null),this.Animations=[],this.Animations=t,this.OnCompleted=e,this.IsCompleted=!1}return t.prototype.Update=function(t){if(0!=this.Animations.length){var e=this.Animations[0];e.Update(t),e.IsCompleted&&(null!=e.OnCompleted&&e.OnCompleted(),this.Animations.splice(0,1)),0==this.Animations.length&&(this.IsCompleted=!0)}},t}();e.AnimationQueue=n},152:function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(153),r=function(t){function e(e,i,n,o){void 0===o&&(o=null),t.call(this,e,i,o),this.TargetPosition=n}return n(e,t),e.prototype.Update=function(t){if(this.durationRemains>t){var e=t*(this.TargetPosition.x-this.Entity.x)/this.durationRemains,i=t*(this.TargetPosition.y-this.Entity.y)/this.durationRemains;this.Entity.x+=e,this.Entity.y+=i,this.durationRemains-=t}else this.Entity.x=this.TargetPosition.x,this.Entity.y=this.TargetPosition.y,this.IsCompleted=!0,this.durationRemains=0},e}(o.AnimationBase);e.AnimationMove=r},153:function(t,e){"use strict";var i=function(){function t(t,e,i){if(null==t)throw"Entity is null";this.Entity=t,this.OnCompleted=i,this.durationRemains=e,this.IsCompleted=!1}return t}();e.AnimationBase=i},154:function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(153),r=function(t){function e(e,i,n,o){void 0===o&&(o=null),t.call(this,e,i,o),this.TargetScale=n}return n(e,t),e.prototype.Update=function(t){if(this.durationRemains>t){var e=t*(this.TargetScale-this.Entity.scale.x)/this.durationRemains;this.Entity.scale.x+=e,this.Entity.scale.y+=e,this.durationRemains-=t}else this.Entity.scale.x=this.TargetScale,this.Entity.scale.y=this.TargetScale,this.IsCompleted=!0,this.durationRemains=0},e}(o.AnimationBase);e.AnimationScale=r},155:function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},o=i(153),r=function(t){function e(e,i,n,o){void 0===o&&(o=null),t.call(this,e,i,o),this.TargetOpacity=n}return n(e,t),e.prototype.Update=function(t){if(this.durationRemains>t){var e=t*(this.TargetOpacity-this.Entity.alpha)/this.durationRemains;this.Entity.alpha+=e,this.durationRemains-=t}else this.Entity.alpha=this.TargetOpacity,this.IsCompleted=!0,this.durationRemains=0},e}(o.AnimationBase);e.AnimationFade=r},156:function(t,e){"use strict";var i=function(){function t(t,e){void 0===e&&(e=null),this.durationRemains=t,this.IsCompleted=!1,this.OnCompleted=e}return t.prototype.Update=function(t){this.durationRemains>t?this.durationRemains-=t:(this.IsCompleted=!0,this.durationRemains=0)},t}();e.AnimationDelay=i},157:function(t,e,i){var n=i(158);"string"==typeof n&&(n=[[t.id,n,""]]);i(164)(n,{});n.locals&&(t.exports=n.locals)},158:function(t,e,i){e=t.exports=i(159)(),e.push([t.id,'body{background-color:#efefef}.control{position:absolute;width:30px;height:30px}.control:after{display:inline-block;content:" "}.control.up{left:300px;top:410px;background:url('+i(160)+") no-repeat}.control.down{left:300px;top:445px;background:url("+i(161)+") no-repeat}.control.left{left:265px;top:445px;background:url("+i(162)+") no-repeat}.control.right{left:335px;top:445px;background:url("+i(163)+") no-repeat}#btn-save{top:410px}#btn-load,#btn-save{position:absolute;left:50px}#btn-load{top:440px}",""])},159:function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(n[r]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),t.push(s))}},t}},160:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAeCAIAAABbkFLLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuOWwzfk4AAALiSURBVEhLzZbNSxRxGMdHdA/75rq1sISCsBSpqLf+gFhSos2CrUMd7NClg3eVbqF49BBCEEW0SHTRpaSNWBWMqFwW1l3ZwNf5zTYz+zazuzPrph3WvpOTpO1qM2vQF+aN53k+zzPP78fMQ+3u7u7s7IyNjVl/ym63N+kVYk0mk9PpnJiYKJVKICv00dHRxsbGoaGhmZmZeDweiUSWtAtRiAVheHjY4XCMjIwo9O3tbWTz+Xx4yGQyyWQypVeIBQGcyclJMEGmwuGwzWYLhUIcx9E0nahNICCB3++3WCy5XI6am5vr7u7GHcMwX2sWIPl8fmpqymw244aan59vb29HQmRWXaoI5r0C1edK2qNPT09jedXaQc9ms0eHwchxLHrLsuwRnnroDCFCXn7vf+zuvb7GCXx1vna6YuAy7PqlC2cpiro//rxQyBNCVOtBaaYTQhfk4qMHA0DXUZTVcW4xTqNDTCV/bfREguFT2fXoB5fTArrB0IDztTuD8tZWxfK10QlhZEkY6O8DtL6+vq4O1VOU0f7y3Ucxm2aYwyEa6ErhaSH+6e35M1aTtclmNTcYDKdOO8C/fW9Qkotomur6Sxr7zrIMTceXY6ubieCLhxd7+sIr3JflpZW1dWxN1ec3aV5VJOA5TpS/hd886716kxa/Z3gWnw3VelDa6YghdEqUPr960nPFu5rawutU89VDTzAknZMXXyv0tXSJS5Bqrv8v/Wmv58a/oqPv7svoe4k/aTqTFqVQwHer/+5mpojaVcMf0kNXhA8voTc2Km/zfemlQyzLsZW3+b5qoEPH+VSgd3R0CILwV/TjdJiO/2pbWxvP8ydFBxR/bQxeSEOBazQag8FgoVA4kYlDkqRAIICZQKkdw43b7fZ4PKIoovsYDnDWp71YQL1eL5jKLIYjFou1trY2Nzd3dXVhhWtRZ2dnS0uLy+WKRqMKvVwu44KEWN7aNTs7u7CwUCwWwSyXyz8AMFRG4oeKiX8AAAAASUVORK5CYII="},161:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuOWwzfk4AAALZSURBVEhL1ZbBT9NQHMcr1EEGEjMSIsELiQbM2BLg4IkQDiaKBw/eBjEQTaaGJf4HwongLgSdcCAeSPRiBm5EvYgXnB4YyXTACdhex7p2W7u205GQMPxWqnGuDrrhwe+hee3v/T7vt99v770fdXBwkM/n9/f3RVEMBAJLS0vvyxV8QchkModMFc1xnMPhoCiqpaWlo6Ojvb39knHBC77Nzc01NTVOpzMej6tol8vV1tbm9Xo3NjawZiqVShsXvOALwvz8vN1uHxkZoSRJqqur8/l8WANLMQwTK1fwBQEcv9/f0NBAITtNTU3r6+uH3J3KRAgRBGFhYaG+vp5C7m02G37LkdzDuLSXvwgTkAagkQkKlUUFkCl4anY9wZrgeEFIl572C202m1U06os6lPCBieOT4ZWAz/+aS5YKwjCaIUT5+u3FjLvfcVfO7TIkqhmKVCb6+Yz7+q37ci6HV81QpHLR04/6B+/9m6j/L3Rse3tLzMhznvFrDqegKFubm0BoxkIZQcdibIKXZAXb1zf3+MbtBxhkFUUUBd35x0b/4G6urUxOjE1Oee4M3LRd7p3yPB0bHX356k1S3WV/xn5cNDzjiRRZ+2A7fwZHblXVKTzp6io8XQ892ayME0Ob+lMGEkKi0Wxu98moC7jTJlM1TWNwsbM3ykvsDlPsYCzXsTjHR750Xjin0mk1ZPczvyKJhOhU0ggaswkR5ax3dlylUlTX1UFekMDQzIUyhobAkUV+4EoXRZnffgqL6SQ5KTTOaT4thD++m56d48VMjDm5MwQCneWSUkbAQPukp3LQEP6LuqX7XTroI2+ZY6oAjbsR/QP6m5NHLy8vt7a2RiIRoCsX9ieiRCui3ugYmUwmdA57e3ssy/KVCQRwFhcXa2tr1e5peHjYarUGg8FwOBwKhT6XK/iCsLq62t3dPTQ0pKITiURPTw9N042NjWcrk8ViQc/X19fHsux3d37ycK8M9UUAAAAASUVORK5CYII="},162:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuOWwzfk4AAAKMSURBVEhL7ZZNbxJRFIYHaBOKFBAWRgNEgqGGuPNXmIALdw27Jl2ZuBCbWiR+NBY3bsVfYBAS00RJDUljbNpqhQVI+TCpCAxF5gOmI9DGJk3xhaktbY0DHd0Yn2Qmk7lznnvn3jl3DrG7u9vqwPM8TdOMBFiW3dnZgUpwEjj8fr/FYjGbzeclAIPRaMR5fHwcfbTVwWBQrVb7fL6FhYVkMplIJD6eCMRGo9FQKAS70+lsq00mk9vtxhVmQzrb29upVEqhUMRiMWJ4eDgcDuMVisViSRokSZbL5Ww2q1KplpaWCIPBkMlkKIpC27o0YIAHNqVSuby8TOh0Oswv3uWvqLEI/6IaTb9p3QfP9KHGzUKxSDMsRVVE7X2oC4XCV4puNhuJ2PvkaqZSEbH3pMYXSpbKjWbzy6fVh1PXCYJ49PQZz1VzuRz664bsihJXQ1vl+Bq17n88bTmjhxc8CcwhY5ubm9+7QO5x1YNAETW82MLevXl1+dIFGGUy+eDAAC6uXBt9cP/e5OTtqZ94PB73rYnZ+Q8sQwtjF1fTTHVlfvbiudMwyuXywcE99fRh9R2P56Z7IjC3yDJMT2rBjgmhCtm7N8bO6k/JICYI//PXv5yQjRqzHyiuBp1VrGxubaVib8dGr0ItLOPn48tIHkT1pG5TKuXzeZqtNb5tvHwRWFyJMcyxZw7Ts7oDSWKvJbkNnqHFt8b+1ALoQNQLTqLukf/qIxxV6/X6dDqNW39ejb8vKhDUPu00kQYM2HhRLAwNDbXVGo1mZmYGSYz/PKZFChgyx3FIhL1Re73ekZGReDwupXQSgGRtbc3lctntdpR9RL1edzgcWq3WarXulW8nRSgcbTZbJBJptVo/AMNj+3gXH83WAAAAAElFTkSuQmCC"},163:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAfCAIAAAB/DupQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuOWwzfk4AAAKlSURBVEhL3ZY/aBpRHMePRh1K6VBaIUY0RqJilNKhZO7WLWLHWmnnDgXbQBRNKJIpoE7N4ODWQQrSpYvN1oI1MbEipVCpd+rp+QeNieYMJJrvxTOkxEa5S6D0M5x39977+Hu/u3vvR/R6vW63i+PR0VG1Wq2IoFwuNxoNqPpOTt1qtex2u0qlUiqVGo1mWhxmszkUCkHLqS0Wi1arDYfD8Xg8lUp9F0QymcTYWCy2uroqk8kikQixubk5MTGRTqcPDw8xI5EwDINYHQ6HyWQigsGgXC4vFou5U/LiyGazSO/KyorBYCB8Ph/yi/SjoSAakiRZlnW73Xq9nvD7/XiA9Xr9CtUej0en03FRq9Xqq43631Oj2yX9hKvRo1yp0HSeoij+1p8IVxfpwva3WDbP7DUbOYrEy8o3DBhLjbjQ7zy/s2SVoaz3Z6fn5j982qjv7tVrFdznB5yCyxFqnO612vg+O+c4YDu9XufpwzkC3JA+fvL889dtlj3AVM6GjlDjp1wqrPvXXr9ZdLlczgFLS85lj9OsuAezRCLB8ebtOy9eLf8iuUT1R4+hLhbWA8PVJsVdSKVSKVYenDx4tPCTpEtjqgHO9v+SkGfzZhiBUj37du1dbbfJlOizsaPVYOhjrJSoBbOWkNx6uej9kSEPWvv50xWNHzOm+iJoZkqFj+9DG1/ibbbDFGmI+LYBAtUAXeq7zVqVe+eGdheuBjmKQg74iwuIUl/Of6C+3l0GxcO1RB0IBCYnJ7HJQy0eqNvtNtTcjh6NRrEg4NtDTvAHfD0hFJqmUYd4vV4uahRnRqPRZrNlMpmdnR2+FhJEv4BKJBKoPlBDcYXZ1tYWCrOpqamZmZl+3SYYSBUKhdVqbTabXNSwY2HDdPiKUwSQ4I2A8Pj4+ARHmj7Hq4CO7gAAAABJRU5ErkJggg=="},164:function(t,e,i){function n(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=p[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(u(n.parts[r],e))}else{for(var s=[],r=0;r<n.parts.length;r++)s.push(u(n.parts[r],e));p[n.id]={id:n.id,refs:1,parts:s}}}}function o(t){for(var e=[],i={},n=0;n<t.length;n++){var o=t[n],r=o[0],s=o[1],a=o[2],l=o[3],u={css:s,media:a,sourceMap:l};i[r]?i[r].parts.push(u):e.push(i[r]={id:r,parts:[u]})}return e}function r(t,e){var i=v(),n=y[y.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function s(t){t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",r(t,e),e}function l(t){var e=document.createElement("link");return e.rel="stylesheet",r(t,e),e}function u(t,e){var i,n,o;if(e.singleton){var r=g++;i=m||(m=a(e)),n=c.bind(null,i,r,!1),o=c.bind(null,i,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=l(e),n=d.bind(null,i),o=function(){s(i),i.href&&URL.revokeObjectURL(i.href)}):(i=a(e),n=h.bind(null,i),o=function(){s(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}function c(t,e,i,n){var o=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=T(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function h(t,e){var i=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function d(t,e){var i=e.css,n=e.sourceMap;n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([i],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var p={},f=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},A=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=f(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0,y=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=A()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var i=o(t);return n(i,e),function(t){for(var r=[],s=0;s<i.length;s++){var a=i[s],l=p[a.id];l.refs--,r.push(l)}if(t){var u=o(t);n(u,e)}for(var s=0;s<r.length;s++){var l=r[s];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete p[l.id]}}}};var T=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()}});
//# sourceMappingURL=app.js.map